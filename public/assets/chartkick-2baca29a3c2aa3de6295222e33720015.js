!function(){"use strict";function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Object}function t(r,o){var a;for(a in o)n(o[a])||e(o[a])?(n(o[a])&&!n(r[a])&&(r[a]={}),e(o[a])&&!e(r[a])&&(r[a]=[]),t(r[a],o[a])):void 0!==o[a]&&(r[a]=o[a])}function r(e,n){var r={};return t(r,e),t(r,n),r}function o(e){var n,t,r,o,a,i,c,l,u,d,s;return d=Object.prototype.toString.call(e),"[object Date]"===d?e:"[object String]"===d?(r=e.match(A))?(s=parseInt(r[1],10),i=parseInt(r[3],10)-1,n=parseInt(r[5],10),t=parseInt(r[7],10),a=r[9]?parseInt(r[9],10):0,u=r[11]?parseInt(r[11],10):0,o=r[12]?1e3*parseFloat(z+r[12].slice(1)):0,l=Date.UTC(s,i,n,t,a,u,o),r[13]&&r[14]&&(c=60*r[15],r[17]&&(c+=parseInt(r[17],10)),c*="-"===r[14]?-1:1,l-=1e3*60*c),new Date(l)):void 0:void 0}function a(e){var n,t,r;for(n=0;n<e.length;n++)for(r=e[n].data,t=0;t<r.length;t++)if(r[t][1]<0)return!0;return!1}function i(e,n,t,o){return function(i,c){var l=r({},e);return c.hideLegend&&n(l),"min"in c?t(l,c.min):a(i)||t(l,0),"max"in c&&o(l,c.max),l=r(l,c.library||{})}}function c(e,n){document.body.innerText?e.innerText=n:e.textContent=n}function l(e,n){c(e,"Error Loading Chart: "+n),e.style.color="#ff0000"}function u(e,n,t){$.ajax({dataType:"json",url:n,success:t,error:function(n,t,r){var o="string"==typeof r?r:r.message;l(e,o)}})}function d(e,n,t,r){try{r(e,n,t)}catch(o){throw l(e,o.message),o}}function s(e,n,t,r){"string"==typeof n?u(e,n,function(n){d(e,n,t,r)}):d(e,n,t,r)}function f(e){return""+e}function g(e){return parseFloat(e)}function h(e){if("object"!=typeof e)if("number"==typeof e)e=new Date(1e3*e);else{var n=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");e=o(n)||new Date(e)}return e}function p(n){if(!e(n)){var t,r=[];for(t in n)n.hasOwnProperty(t)&&r.push([t,n[t]]);n=r}return n}function v(e,n){return e[0].getTime()-n[0].getTime()}function m(n,t,r){var o,a,i,c,l;for(!e(n)||"object"!=typeof n[0]||e(n[0])?(n=[{name:"Value",data:n}],t.hideLegend=!0):t.hideLegend=!1,o=0;o<n.length;o++){for(i=p(n[o].data),c=[],a=0;a<i.length;a++)l=i[a][0],l=r?h(l):f(l),c.push([l,g(i[a][1])]);r&&c.sort(v),n[o].data=c}return n}function y(e,n,t){C(e,m(n,t,!0),t)}function w(e,n,t){T(e,m(n,t,!1),t)}function x(e,n,t){var r,o=p(n);for(r=0;r<o.length;r++)o[r]=[f(o[r][0]),g(o[r][1])];S(e,o,t)}function b(e,n,t,r){"string"==typeof e&&(e=document.getElementById(e)),s(e,n,t||{},r)}var C,S,T,A=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,z=String(1.5).charAt(1);if("Highcharts"in window){var j={xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}}},L=function(e){e.legend.enabled=!1},D=function(e,n){e.yAxis.min=n},I=function(e,n){e.yAxis.max=n},O=i(j,L,D,I);C=function(e,n,t){var r,o,a,i=O(n,t);for(i.xAxis.type="datetime",i.chart={type:"spline",renderTo:e.id},o=0;o<n.length;o++){for(r=n[o].data,a=0;a<r.length;a++)r[a][0]=r[a][0].getTime();n[o].marker={symbol:"circle"}}i.series=n,new Highcharts.Chart(i)},S=function(e,n,t){var o=r(j,t.library||{});o.chart={renderTo:e.id},o.series=[{type:"pie",name:"Value",data:n}],new Highcharts.Chart(o)},T=function(e,n,t){var r,o,a,i,c=O(n,t),l=[];for(c.chart={type:"column",renderTo:e.id},r=0;r<n.length;r++)for(a=n[r],o=0;o<a.data.length;o++)i=a.data[o],l[i[0]]||(l[i[0]]=new Array(n.length)),l[i[0]][r]=i[1];var u=[];for(r in l)l.hasOwnProperty(r)&&u.push(r);c.xAxis.categories=u;var d=[];for(r=0;r<n.length;r++){for(i=[],o=0;o<u.length;o++)i.push(l[u[o]][r]);d.push({name:n[r].name,data:i})}c.series=d,new Highcharts.Chart(c)}}else if("google"in window){var k=!1;google.setOnLoadCallback(function(){k=!0}),google.load("visualization","1.0",{packages:["corechart"]});var H=function(e){google.setOnLoadCallback(e),k&&e()},j={fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc"},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},L=function(e){e.legend.position="none"},D=function(e,n){e.vAxis.viewWindow.min=n},I=function(e,n){e.vAxis.viewWindow.max=n},O=i(j,L,D,I),P=function(e,n){var t=new google.visualization.DataTable;t.addColumn(n,"");var r,o,a,i,c,l=[];for(r=0;r<e.length;r++)for(a=e[r],t.addColumn("number",a.name),o=0;o<a.data.length;o++)i=a.data[o],c="datetime"===n?i[0].getTime():i[0],l[c]||(l[c]=new Array(e.length)),l[c][r]=g(i[1]);var u=[];for(r in l)l.hasOwnProperty(r)&&u.push(["datetime"===n?new Date(g(r)):r].concat(l[r]));return"datetime"===n&&u.sort(v),t.addRows(u),t};C=function(e,n,t){H(function(){var r=O(n,t),o=P(n,"datetime"),a=new google.visualization.LineChart(e);a.draw(o,r)})},S=function(e,n,t){H(function(){var o=r(j,t.library||{});o.chartArea={top:"10%",height:"80%"};var a=new google.visualization.DataTable;a.addColumn("string",""),a.addColumn("number","Value"),a.addRows(n);var i=new google.visualization.PieChart(e);i.draw(a,o)})},T=function(e,n,t){H(function(){var r=O(n,t),o=P(n,"string"),a=new google.visualization.ColumnChart(e);a.draw(o,r)})}}else C=S=T=function(){throw new Error("Please install Google Charts or Highcharts")};var V={LineChart:function(e,n,t){b(e,n,t,y)},ColumnChart:function(e,n,t){b(e,n,t,w)},PieChart:function(e,n,t){b(e,n,t,x)}};window.Chartkick=V}();